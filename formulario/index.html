<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Informe T√©cnico - Mantenimiento</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Fuente Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet" />

    <!-- Tu CSS personalizado -->
    <link rel="stylesheet" href="css/estilos.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
</head>

<body class="bg-light">
    <!-- ---------- ENCABEZADO ---------- -->
    <header class="bg-dark text-white py-3">
        <div class="container d-flex align-items-center justify-content-between">
            <figure class="m-0 d-flex align-items-center">
                <img src="img/logo.png" alt="Logo de la empresa" width="70" height="70" class="me-2" />
                <figcaption class="fw-bold text-uppercase">
                    ORGANIZACI√ìN<br />C√ÅRDENAS S.A.S
                </figcaption>
            </figure>

            <div class="text-end">
                <h1 class="h3 mb-0">INFORME T√âCNICO</h1>
                <h2 class="h5 text-secondary">MANTENIMIENTO</h2>
            </div>
        </div>
    </header>

    <!-- ---------- CONTENIDO PRINCIPAL ---------- -->
    <main id="contenedorPrincipal" class="container my-4">
        <!-- Formulario -->
        <form id="formulario" class="card shadow p-4" onsubmit="return false;">
            <fieldset class="mb-4">
                <legend class="fw-bold text-primary border-bottom pb-2 mb-3">
                    Datos del Mantenimiento
                    <!-- Botones principales -->
                    <section>
                        <button id="nuevoFormulario" type="button" class="btn btn-primary">
                            <i class="bi bi-folder-plus"></i>
                        </button>
                        <div id="contadorContainer" class="fw-bold"></div>
                        <div id="instanciaContainer"></div>
                    </section>
                </legend>

                <!-- QR-->
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="codigo" class="form-label"># Activo</label>
                        <input id="codigo" type="text" class="form-control" placeholder="FO-1600-041" />
                    </div>

                    <div class="col-md-6 d-flex align-items-end">
                        <button id="btnQR" type="button" class="btn btn-outline-secondary w-100">
                            <i class="bi bi-qr-code-scan"></i> 
                        </button>
                    </div>
                </div>

                <!-- Modal para el esc√°ner QR -->
                <div class="modal fade" id="modalQR" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content text-center">
                            <div class="modal-header">
                                <h5 class="modal-title">Escanear c√≥digo QR</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <video id="videoQR" style="width: 100%; border-radius: 8px" autoplay></video>
                            </div>
                        </div>
                    </div>
                </div>
                <p id="supervisor" class="text-muted mt-3">
                    üë§ Supervisor:
                    <span class="d-none d-sm-inline">(selecciona una planta)</span>
                    <br class="d-sm-none" />
                    <span class="d-sm-none">(selecciona una planta)</span>
                </p>

                <div class="row g-3">
                    <div class="col-md-4">
                        <label for="planta" class="form-label">Planta</label>
                        <select id="planta" class="form-select">
                            <option disabled selected>Seleccione una planta</option>
                            <option value="GRANOS">GRANOS</option>
                            <option value="ASEO">ASEO</option>
                            <option value="ALIMENTOS">ALIMENTOS</option>
                            <option value="AGUAS">BEBIDAS</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label for="area" class="form-label">√Årea</label>
                        <select id="area" class="form-select">
                            <option disabled selected>Seleccione un √°rea</option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label for="equipo" class="form-label">Equipo / M√°quina</label>
                        <select id="equipo" class="form-select">
                            <option disabled selected>Seleccione un equipo</option>
                        </select>
                    </div>
                </div>

                <div class="row g-3 mt-3">
                    <div class="col-md-6">
                        <label for="fechaInicio" class="form-label">Fecha Inicio</label>
                        <input id="fechaInicio" type="datetime-local" class="form-control" required />
                    </div>
                    <div class="col-md-6">
                        <label for="fechaFin" class="form-label">Fecha Fin</label>
                        <input id="fechaFin" type="datetime-local" class="form-control" />
                    </div>
                </div>

                <div class="mt-3">
                    <label for="tiempo" class="form-label">Tiempo empleado</label>
                    <input id="tiempo" type="text" readonly class="form-control"
                        placeholder="Se calcular√° autom√°ticamente" />
                </div>

                <div class="mt-3">
                    <label for="tipoMantenimiento" class="form-label">Tipo de mantenimiento</label>
                    <select id="tipoMantenimiento" class="form-select">
                        <option disabled selected>Seleccione clase</option>
                        <option>Preventivo</option>
                        <option>Correctivo</option>
                        <option>Predictivo</option>
                        <option>Mejora/Adecuaci√≥n</option>
                    </select>
                </div>

                <div class="mt-3">
                    <label for="ejecutor" class="form-label">T√©cnico Mantenimiento</label>
                    <select id="ejecutor" class="form-select">
                        <option disabled selected>Seleccione T√©cnico</option>
                        <option>JORGE LEONARDO RODRIGUEZ</option>
                        <option>PINEDA AGUDELO YONATAN STIVEN</option>
                        <option>QUEVEDO LADINO MARIO</option>
                        <option>SARMIENTO ATENCIO DANILO</option>
                        <option>DIEGO ALEJANDRO ALARCON HERNANDEZ</option>
                        <option>JHON ANDRES QUINTERO</option>
                        <option>JULIAN ANDRES ALAVAREZ AHUMADA</option>
                    </select>
                </div>

                <div class="mt-3">
                    <label for="danos" class="form-label">Da√±os encontrados</label>
                    <textarea id="danos" class="form-control" rows="3"></textarea>
                </div>

                <div class="mt-3">
                    <label for="trabajo" class="form-label">Trabajo ejecutado</label>
                    <textarea id="trabajo" class="form-control" rows="3"></textarea>
                </div>

                <div class="mt-3">
                    <label for="herramientas" class="form-label fw-bold text-primary">
                        Herramientas utilizadas
                    </label>

                    <div class="d-flex gap-2">
                        <!-- Selector de categor√≠a -->
                        <select id="categoriaHerramientas" class="form-select" style="max-width: 260px">
                            <option value="">Todas las categor√≠as</option>
                            <option value="Llaves fijas">Llaves fijas</option>
                            <option value="Llaves Bristol">Llaves Bristol</option>
                        </select>
                        <!-- Buscador -->
                        <div style="position: relative; flex: 1">
                            <input type="text" id="buscadorHerramientas" class="form-control"
                                placeholder="Buscar herramienta..." />
                            <div id="sugerenciasHerramientas" style="
                    position: absolute;
                    background: white;
                    border: 1px solid #ccc;
                    border-radius: 6px;
                    width: 100%;
                    z-index: 1000;
                  "></div>
                        </div>
                    </div>

                    <!-- Campo donde se agregan las herramientas -->
                    <textarea id="herramientas" class="form-control mt-2" rows="5"></textarea>
                </div>

                <div class="mt-3">
                    <label for="repuestos" class="form-label fw-bold text-primary">Repuestos utilizados</label>

                    <div class="d-flex gap-2">
                        <!-- Selector de categor√≠a -->
                        <select id="categoriaRepuesto" class="form-select" style="max-width: 220px">
                            <option value="">Todas las categor√≠as</option>
                            <option value="Neum√°ticos">Neum√°ticos</option>
                            <option value="El√©ctricos">El√©ctricos</option>
                            <option value="Mec√°nicos">Mec√°nicos</option>
                            <option value="Rodamientos">Rodamientos</option>
                            <option value="Torniller√≠a">Torniller√≠a</option>
                            <option value="Lubricantes y sellos">
                                Lubricantes y sellos
                            </option>
                        </select>

                        <!-- Buscador -->
                        <div style="position: relative; flex: 1">
                            <input type="text" id="buscadorRepuestos" class="form-control"
                                placeholder="Buscar repuesto..." />
                            <div id="sugerencias" style="
                    position: absolute;
                    background: white;
                    border: 1px solid #ccc;
                    border-radius: 6px;
                    width: 100%;
                    z-index: 1000;
                  "></div>
                        </div>
                    </div>

                    <!-- Campo donde se agregan los repuestos seleccionados -->
                    <textarea id="repuestos" class="form-control mt-2" rows="5"></textarea>
                </div>
                <!-- REGISTRO FOTOGR√ÅFICO -->
                <fieldset class="mb-4">
                    <legend class="fw-bold text-primary border-bottom pb-2 mb-3">
                        Registro Fotogr√°fico
                    </legend>

                    <!-- Tomar foto con c√°mara -->
                    <input id="fotosTomar" type="file" accept="image/*" capture="environment" class="d-none" />
                    <label for="fotosTomar" class="btn btn-fondo-azul d-flex align-items-center gap-2">
                        <i class="bi bi-camera fs-4"></i>
                    </label>

                    <!-- Seleccionar desde galer√≠a -->
                    <input id="fotos" type="file" accept="image/*" multiple class="d-none" />

                    <label for="fotos" class="btn btn-fondo-azul d-flex align-items-center gap-2">
                        <i class="bi bi-image fs-4"></i>
                    </label>

                    <div id="thumbs" class="d-flex flex-wrap gap-2 mt-2"></div>
                </fieldset>

                <!-- FIRMAS -->
                <fieldset class="mb-4">
                    <legend class="fw-bold text-primary border-bottom pb-2 mb-3">
                        Firmas
                    </legend>
                    <div class="mb-3">
                        <label class="form-label">Firma T√©cnico Mantenimiento</label>
                        <canvas id="sigEjecutor" class="border w-100 bg-white rounded" style="height: 200px;"></canvas>
                        <button type="button" class="btn btn-outline-secondary mt-2 rounded">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Firma Supervisor/Operario</label>
                        <canvas id="sigCoordinador" class="border w-100 bg-white rounded"
                            style="height: 200px;"></canvas>
                        <button type="button" class="btn btn-outline-secondary mt-2 rounded">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </fieldset>
                <!-- BOTONES DE ACCI√ìN -->
                <div class="d-flex justify-content-between mt-4">
                    <button id="btnDescargar" type="button" class="btn btn-outline-primary">
                        <i class="bi bi-download"></i>
                    </button>
                    <button id="btnCompartir" type="button" class="btn btn-success">
                        <i class="bi bi-share"></i>
                    </button>
                </div>
        </form>
    </main>

    <footer class="text-center py-3 mt-4 border-top">
        <p id="estado" class="text-muted small mb-0"></p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- JS Bootstrap y tus scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Librer√≠a jsPDF desde CDN -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script type="module" src="./js/main.js"></script>
</body>


</html>



